<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Schedule - Volleyball Team</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Match Schedule</h1>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="team.html">Team</a></li>
        <li><a href="schedule.html">Schedule</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="live.html">Live Matches</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section>
      <h2>Upcoming Fixtures</h2>
      <table id="fixtures-table" class="match-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Home Team</th>
            <th>Away Team</th>
            <th>Venue</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
          <!-- Fixtures loaded here -->
        </tbody>
      </table>
    </section>

    <section>
      <h2>Recent Results</h2>
      <table id="results-table" class="match-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Home Team</th>
            <th>Away Team</th>
            <th>Result</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody>
          <!-- Results loaded here -->
        </tbody>
      </table>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Volleyball Team | <a href="admin-index.html" class="admin-link">Admin Home</a></p>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    // Firebase config (same as admin, don't change)
    const firebaseConfig = {
      apiKey: "AIzaSyBvWi6AnuSvv4rVfOyuB1hHSXCs_EmH7_w",
      authDomain: "volleyball-live-matches.firebaseapp.com",
      databaseURL: "https://volleyball-live-matches-default-rtdb.firebaseio.com/",
      projectId: "volleyball-live-matches",
      storageBucket: "volleyball-live-matches.appspot.com",
      messagingSenderId: "816439415663",
      appId: "1:816439415663:web:662f0e267a640483a70e9a"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const fixturesTableBody = document.querySelector("#fixtures-table tbody");
    const resultsTableBody = document.querySelector("#results-table tbody");

    const fixturesRef = db.ref('schedule/fixtures');
    const resultsRef = db.ref('schedule/results');

    // Function to create table rows for fixtures
    function createFixtureRow(data) {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${data.date || ""}</td>
        <td>${data.home || ""}</td>
        <td>${data.away || ""}</td>
        <td>${data.venue || ""}</td>
        <td>${data.time || ""}</td>
      `;
      return tr;
    }

    // Function to create table rows for results
    function createResultRow(data) {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${data.date || ""}</td>
        <td>${data.home || ""}</td>
        <td>${data.away || ""}</td>
        <td>${data.result || ""}</td>
        <td>${data.score || ""}</td>
      `;
      return tr;
    }

    // Listen for fixture updates
    fixturesRef.on('value', snapshot => {
      fixturesTableBody.innerHTML = ""; // Clear existing
      const fixtures = snapshot.val();
      if (fixtures) {
        Object.values(fixtures).forEach(fixture => {
          fixturesTableBody.appendChild(createFixtureRow(fixture));
        });
      } else {
        fixturesTableBody.innerHTML = '<tr><td colspan="5">No upcoming fixtures available.</td></tr>';
      }
    });

    // Listen for result updates
    resultsRef.on('value', snapshot => {
      resultsTableBody.innerHTML = ""; // Clear existing
      const results = snapshot.val();
      if (results) {
        Object.values(results).forEach(result => {
          resultsTableBody.appendChild(createResultRow(result));
        });
      } else {
        resultsTableBody.innerHTML = '<tr><td colspan="5">No recent results available.</td></tr>';
      }
    });
  </script>
</body>
</html>
